<div>
    <div class="alert alert-danger" ng-hide="patch.isCurrent===true">
        <strong>Beware !</strong> This is not the current patch !
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">About this patch</div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-4">
                    <label for="releaseManager">Release Manager </label>
                    <a class="btn btn-primary" href="mailto:{{patch.releaseManagerMail}}" id="releaseManager">{{patch.releaseManager}}</a>
                </div>

                <div class="col-md-2">
                    <label for="version">Version </label>
                    <a class="btn btn-default" id="version">{{patch.version}}</a>
                </div>

                <div class="col-md-4">
                    <label for="date">Date </label>
                    <a class="btn btn-default" id="date">{{patch.date | date:'mediumDate'}}</a>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">Gerrits</div>
        <div class="panel-body">
            <button style="float: left;" type="button" class="btn btn-success active" ng-click="refreshAllGerrits()"><span class="glyphicon glyphicon-refresh"></span> Refresh All</button>
            <button style="float: right;" type="button" class="btn btn-primary active right" data-toggle="modal" data-target="#myModal" ng-click="newGerrit={}"><span class="glyphicon glyphicon-plus"></span> Add Gerrit</button>
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th></th>
                    <th>Gerrit</th>
                    <th>Title</th>
                    <th>Jira</th>
                    <th>Owner</th>
                    <th>Patch Status</th>
                    <th>Jira Status</th>
                    <th>Merge Status</th>
                    <th>Test Status</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="gerrit in gerrits">
                    <td><button type="button" class="btn btn-success active btn-sm" ng-click="refreshGerrit(gerrit)"><span class="glyphicon glyphicon-refresh"></span></button></td>
                    <td>{{gerrit.id}}</td>
                    <td>{{gerrit.title}}</td>
                    <td>{{gerrit.jira}}</td>
                    <td>{{gerrit.owner}}</td>
                    <td>{{gerrit.status.patch}}</td>
                    <td>{{gerrit.status.jira}}</td>
                    <td>{{gerrit.status.merge}}</td>
                    <td>{{gerrit.status.test}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">New gerrit for the patch</h4>
                </div>
                <div class="modal-body">
                    <form role="form">
                        <div class="form-group">
                            <label for="gerritId"><span class="glyphicon glyphicon-search"></span> Gerrit Id</label>
                            <div class="input-group"  id="gerritId">
                                <input type="text" class="form-control" aria-describedby="basic-addon1" placeholder="123" ng-model="newGerrit.id">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" type="button" ng-click="searchForGerrit()"><span class="glyphicon glyphicon-search"></span></button>
                                </span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="owner"><span class="glyphicon glyphicon-user"></span> Owner</label>
                            <input type="text" class="form-control" id="owner" ng-model="newGerrit.owner" placeholder="Please click on the gerrit id search button ..." ng-disabled="true">
                        </div>
                        <div class="form-group">
                            <label for="title"><span class="glyphicon glyphicon-file"></span> Title</label>
                            <input type="text" class="form-control" id="title" ng-model="newGerrit.title" placeholder="Please click on the gerrit id search button ..." ng-disabled="true">
                        </div>
                        <div class="form-group">
                            <label for="jiraId"><span class="glyphicon glyphicon-bookmark"></span> Jira</label>
                            <input type="text" class="form-control" id="jiraId" ng-model="newGerrit.jira" placeholder="Please click on the gerrit id search button ..." ng-disabled="true">
                        </div>
                        <div class="form-group">
                            <label for="jiraStatus"><span class="glyphicon glyphicon-ok"></span> Jira Status</label>
                            <input type="text" class="form-control" id="jiraStatus" ng-model="newGerrit.status.jira" placeholder="Please click on the gerrit id search button ..." ng-disabled="true">
                        </div>
                        <div class="form-group">
                            <label for="mergeStatus"><span class="glyphicon glyphicon-ok"></span> Review Status</label>
                            <input type="text" class="form-control" id="mergeStatus" ng-model="newGerrit.status.merge" placeholder="Please click on the gerrit id search button ..." ng-disabled="true">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-danger btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Cancel</button>
                    <button type="submit" class="btn btn-success btn-default pull-right" data-dismiss="modal" ng-click="saveGerrit()"><span class="glyphicon glyphicon-plus"></span> Add</button>
                </div>
            </div>

        </div>
    </div>
</div>
